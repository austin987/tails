<!DOCTYPE html>

<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tails - Tails January to July 2015 report</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" href="../../../../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../../local.css" type="text/css" />


<script src="../../../../lib/js/mirror-dispatcher.js" type="text/javascript"></script>









</head>


<body class="en">


<div class="searchform">



</div>

<div class="banner" role="banner">
  <a class="tails" href="../../../../index.en.html">
    <span class="acronym">Tails</span><br/>
    <span class="slogan">The Amnesic Incognito Live System</span>
  </a>
</div>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">
<ul id="crumbs">
<li><a href="../../../../index.en.html"><img src="../../../../lib/home.png"></a></li>







<li><a href="../../../../contribute.en.html">contribute</a></li>





<li><a href="../../../reports.html">reports</a></li>





<li><a href="../../SponsorS.html">SponsorS</a></li>





<li><a href="../../../../index.en.html">2015</a></li>




<li>Tails January to July 2015 report</li>

</ul>
</span>
<span class="title">
Tails January to July 2015 report
</span>
</span>
</div>










</div>



<div class="sidebar" role="navigation">
<div class="download button">
  <a href="../../../../install.en.html"><span class="download">Install</span>
    <span class="tails">Tails 
3.9
</span>
    <span class="date">
2018-09-05</span></a>
</div>




<div class="links">
  <ul>
    <li><a href="../../../../about.en.html">About</a></li>
    <li><a href="../../../../getting_started.en.html">Getting started…</a></li>
    <li><a href="../../../../doc.en.html">Documentation</a></li>
    <li><a href="../../../../support.en.html">Help &amp; Support</a></li>
    <li><a href="../../../../contribute.en.html">Contribute</a></li>
    <li><a href="../../../../news.en.html">News</a></li>
  </ul>
</div>




<div class="donate button">
    <a href="https://tails.boum.org/donate?r=sidebar">Donate</a>
</div>


</div>



<div id="pagebody">

<div id="content" role="main">
<p>This reports covers the activity of Tails from February 2015 and until
the end of July 2015, as no contract was signed before August.</p>

<p>Everything in this report can be made public.</p>

<p>A small number of these deliverables are late compared to the
initially planned milestones, because without a contract and the
guarantee that they would be paid, contractors have "only" done the
vast majority of the work, but did not feel strictly bound to these
deadlines yet.</p>

<h1>A. Replace Claws Mail with Icedove</h1>

<p>Due to an <a href="../../../../security/claws_mail_leaks_plaintext_to_imap.en.html">important security issue that we discovered in Claws Mails</a>
we want to move faster on the migration to Icedove and try to have it in Tails
1.7 (November 3) instead of Tails 1.9 (January 26). Icedove in Tails 1.7
will fallback on the account wizard provided by TorBirdy, and Icedove in
Tails 1.9 will have the usual Icedove wizard with additional security (for
example with TLS enforced).</p>

<h1>B. Improve our quality assurance process</h1>

<h2>B.1. Automatically build ISO images for all the branches of our source code that are under active development</h2>

<p>Any active Tails development branch is now built automatically on our
Jenkins server. Since this piece of infrastructure has been deployed,
every day at least 20 branches have been built, which exceeds the goal
(ten per day) that we had set. The latest builds can be found on
<a href="http://nightly.tails.boum.org/">http://nightly.tails.boum.org/</a>.</p>

<p>This is the first stage towards integrating our automated test suite
at the core of our software development process, and to run it
continuously on our development versions while they are
being developed.</p>

<p>The steps that lead to completion of this project where:</p>

<ul>
<li><p>B.1.1. Improve the Puppet code of our ISO building server (based on Jenkins) to be able to replicate our setup as needed: <a href="https://labs.riseup.net/code/issues/6938">#6938</a> and <a href="https://labs.riseup.net/code/issues/6056">#6056</a></p>

<p>Once this refactoring was completed, we successfully validated it by
replicating our Jenkins setup locally. This should for example help
new contributors participate in infrastructure improvements.</p></li>
<li><p>B.1.2. Have a mechanism to automatically update Jenkins jobs when changes to their code are pushed through Git: <a href="https://labs.riseup.net/code/issues/5898">#5898</a></p>

<p>This, along with the next few completed tasks, enabled us to have
the Jenkins build jobs dynamically generated based on activity that
happens in the main Tails code repository, in a fully automated way.</p></li>
<li><p>B.1.3. Decide what kind of branches qualify for automatic building: <a href="https://labs.riseup.net/code/issues/8655">#8655</a></p>

<p>After an initial design was proposed by our infrastructure team,
other Tails developers were involved in the discussion to make sure
that what we were going to set up was a good match for their needs.
It was a long process, but after a few iterations we were confident
that we had identified the most important issues and resolved them,
which proved to be correct once the whole system was deployed
later on.</p></li>
<li><p>B.1.4. Improve automatic cleanup of nightly built ISO images: <a href="https://labs.riseup.net/code/issues/6439">#6439</a></p>

<p>The program that takes care of garbage collecting ISO images built
on our Jenkins infrastructure was previously buggy. Issues in the
algorithm were identified, a new algorithm was designed and
implemented, which resolved the issue. This will make it easier for
developers to debug regressions: they now have more data points
to compare.</p></li>
<li><p>B.1.5. Publish and upstream our improvements to the Jenkins Puppet module to ease its maintenance: <a href="https://labs.riseup.net/code/issues/9682">#9682</a></p>

<p>Tails has a policy of working hand-in-hand with upstream when
feasible, as a way to share our improvements with the outside world,
and more pragmatically as a way of keeping our project sustainable
on the long run. Here, we have worked with the upstream author of
the puppet-jenkins module and had our improvements merged upstream.
As a result, we now are back to using the upstream version of
this code.</p></li>
<li><p>B.1.6. Have topic branches built using the APT repository of their base branch (stable, devel, etc.)
and not devel by default as is currently the
case, merging them into their base branch. Adjust contributing
processes and documentation accordingly: <a href="https://labs.riseup.net/code/issues/8654">#8654</a></p>

<p>We deemed it important, when building ISO images from development
branches, to make sure that they merge fine with the base branch
they should land into eventually, and in turn that they build fine
after this merge has been done. It proved to be seriously harder
than expected: we had to encode information, in our Git tree, about
which APT repositories should be used when building a Tails ISO
image from a given branch, and to adjust great parts of our
development &amp; QA processes and infrastructure. Thankfully the result
works well and makes the daily work of Tails developers easier.</p></li>
<li><p>B.1.7. Write library code that implements the automatic build criteria and parameters designed during the previous iteration: <a href="https://labs.riseup.net/code/issues/8657">#8657</a></p></li>
<li><p>B.1.8. Write tools that generate a set of Jenkins jobs to build ISO images based on the aforementioned library code: <a href="https://labs.riseup.net/code/issues/8656">#8656</a></p>

<p>This is the implementation of the design we came up with previously
(B.1.3). The vast majority of the code was implemented as a library,
so that we can reuse it in the future for whatever may need it.</p></li>
<li><p>B.1.9. Deploy, refresh regularly our Jenkins jobs and automatically clean obsolete ones: <a href="https://labs.riseup.net/code/issues/8658">#8658</a></p>

<p>This was the final step, when we deployed live the entire piece of
infrastructure, crossed fingers, and happily saw it work flawlessly.</p></li>
</ul>


<h2>B.2. Continuously run our entire test suite on all those ISO images once they are built</h2>

<ul>
<li><p>B.2.1. Adjust our infrastructure to run tests in parallel</p>

<p>This was not fully completed. Some initial work has been done,
though:</p>

<ul>
<li>We have started adjusting our server setup, Puppet modules and
maintenance procedures to cope with multiple test runners.</li>
<li>We have starting deploying more virtual machines that will act as
test runners.</li>
</ul>
</li>
<li><p>B.2.2. Decide what kind of ISO images qualify for testing and when, how to process, advertise, and store the results</p>

<p>An initial draft design was written, posted on our development
mailing list, and as a result the discussion has started but was not
completed yet.</p></li>
</ul>


<h2>B.3. Extend the coverage of our test suite</h2>

<h3>Refactoring to make room for improvements in the next iterations</h3>

<ul>
<li><p>B.3.1. Use libguestfs for better disk handling in the test suite: <a href="https://labs.riseup.net/code/issues/5294">#5294</a></p>

<p>Using libguestfs gave us some noticeable performance improvements
when running our automated test suite, and enables us more
flexibility when dealing with disk images.</p></li>
<li><p>B.3.2. Reorganize the test suite: <a href="https://labs.riseup.net/code/issues/6543">#6543</a></p>

<p>After two years of active development, our test suite has seen
a well-deserved spring clean up and refactoring, which allows us to
add more tests in a maintainable way.</p></li>
</ul>


<h3>Writing more automated tests</h3>

<ul>
<li><p>B.3.3. Test "Report an error" launcher: <a href="https://labs.riseup.net/code/issues/6904">#6904</a></p>

<p>This was completed, and got rid of one more manual test we
previously had to do at release time.</p></li>
<li><p>B.3.5. Write tests for I2P</p>

<p>Some initial work has been done, but it has not been completed yet.</p></li>
<li><p>A great number of additional tests were written over the reporting
period, as part of a project we have with another sponsor.</p></li>
</ul>


<h3>Make our test suite robust and faster</h3>

<p>During this iteration, this included:</p>

<ul>
<li><p>B.3.4. Research how we can use background snapshots more efficiently for speeding up the test suite
and report upstream any bug we discover
along the way, if any, in the hope that we can benefit more from
this feature later on: <a href="https://labs.riseup.net/code/issues/6094">#6094</a></p>

<p>A proof-of-concept was created, and so far it is very convincing:
e.g. we've seen 20-30% test suite runtime decrease on various
hardware. We've been hit by a limitation in libvirt, and started
discussing it with upstream. Next steps are to polish our
proof-of-concept, merge it into our development branch, and report
a kernel bug to Linux upstream.</p></li>
<li><p>During the reporting period, lots of efforts were put into making
our test suite more robust, as part of a project we have with
another sponsor.</p></li>
</ul>


<h1>C. Scale our infrastructure</h1>

<h2>C.2. Be able to detect within hours failures and malfunction on our services</h2>

<p>This section is about monitoring the most critical pieces of the
infrastructure that supports Tails development. We have some early
progress to report about, even though this deliverable is technically
part of a milestone that is still many months in the future.</p>

<ul>
<li><p>C.2.3. Do an inventory of the services that need monitoring and prioritize: <a href="https://labs.riseup.net/code/issues/8649">#8649</a></p>

<p>We did that, and while we were at it we wrote a detailed
specification for the upcoming monitoring system, which will help
choose software and hosting.</p></li>
<li><p>Some initial experiments and comparisons were made with several
monitoring systems. A dedicated virtual machine has been set up for
these experiments.</p></li>
</ul>


<h2>C.3. Make it easier for new contributors to start working on Tails</h2>

<p>Until a few months ago, cloning our main Git repository required
downloading more than 300 MB of data. Most of this corresponded to
files that were not useful anymore. This made it hard for new
contributors to start working on Tails, so we had little choice but
rewriting the history of this repository. This is what we did, and as
a result our Git repository is now 75 MB large (the objective was:
less than 150 MB).</p>

<p>As expected, the implied migration process was a bit hard for the
least technical of Tails existing contributors (e.g. translators), but
given good documentation and support, everyone was able to go
through it.</p>

<p>We also made it so obsolete Git branches and APT repositories are now
identified and cleaned up regularly.</p>

<p>This covers deliverables C.3.1 to C.3.7.</p>

<h2>C.4. Maintain our already existing services</h2>

<p>This covers deliverables C.4.1 and C.4.2.</p>

<p>Aside of the usual security updates and taking care of daily requests
coming from the Tails development community, here are a few selected
tasks we have completed:</p>

<ul>
<li>completed the migration of our main server to new hardware;</li>
<li>moved the /promote/ website directory to a dedicated Git
repository so that it can grow without cluttering the main one;</li>
<li>upgraded almost all our systems to Debian Jessie and adjusted our
Puppet code accordingly;</li>
<li>set up an archive of the Tor Browser tarballs we need, which removes
one of the blockers so previous tags in our Git repository can still
be built in the future;</li>
<li>set up a Jenkins job to proactively check for upstream merge
conflicts in our Tor Browser AppArmor profile;</li>
<li>improved and distributed our backup processes;</li>
<li>made it so our APT repository's keyring, and the exported APT repo's
pubkey we publish, are automatically updated;</li>
<li>extended storage capacity on our main server;</li>
<li>set up the infrastructure that the automated test suite team
requested (SSH, sftp, shared secrets repository);</li>
<li>written a Puppet module to deploy systems able to run our
test suite.</li>
</ul>


<h1>D. Migration to Debian Jessie</h1>

<p>We did quite some work on this migration. For details about bits that
are not covered by this OTF project, see
<a href="https://labs.riseup.net/code/projects/tails/issues?query_id=130">https://labs.riseup.net/code/projects/tails/issues?query_id=130</a>.</p>

<h2>D.2. Take advantage of systemd to improve the internals of Tails</h2>

<ul>
<li><p>D.2.1. Convert at least 4 of our custom initscripts to native systemd units</p>

<p>The 9 custom initscripts currently shipped in Tails (based on Debian
Wheezy) were converted to systemd unit files. Besides, while we were
at it, we converted most of our custom GNOME session initialization
scripts to systemd (9 more units in the end), as well as the MAC
address spoofing subsystem.</p></li>
<li><p>D.2.2. Replace our patches to initscripts from Debian with systemd drop-in overrides</p>

<p>This is work in progress: our Jessie branch still patches 13
initscripts. For the record, the goal we want to reach here is to go
down to 9.</p></li>
</ul>


<h2>D.6. Upgrade Tails-specific tools to Debian Jessie technologies</h2>

<ul>
<li><p>D.6.1 Port Tails-specific tools from udisks 1 to udisks 2: <a href="https://labs.riseup.net/code/issues/8292">#8292</a></p>

<p>We have ported Tails Installer, Tails Upgrader, and the persistent
volume assistant to udisks 2. As a result, our Jessie branch does
not ship udisks 1 anymore, which forced us to port our automated
test suite (that still relied on it) as well.</p></li>
<li><p>D.6.2 Adjust the memory wipe on shutdown feature for Debian Jessie: <a href="https://labs.riseup.net/code/issues/7183">#7183</a>, <a href="https://labs.riseup.net/code/issues/8372">#8372</a> and <a href="https://labs.riseup.net/code/issues/9032">#9032</a></p>

<p>This ended up being quite involved, but was successfully completed.</p>

<p>Besides, we have created a Debian package (codename: wiperam) that
takes over this subsystem of Tails. The idea is that other similar
projects could benefit from it, and once all the pre-requisites have
been implemented in Debian, we could even make it available to all
Debian and Ubuntu users.</p></li>
<li><p>D.6.3 Port WhisperBack, our integrated bug reporting tool, to Python 3</p>

<p>The initial port is done; it implied replacing some of the libraries
used by the Python 2 version, with others that support Python 3.
The last remaining step is to add native SOCKS proxy support to
this application, because for some reason the Python 3 version does
not start under torsocks: <a href="https://labs.riseup.net/code/issues/9412">#9412</a></p></li>
</ul>


<h1>E. Release management</h1>

<ul>
<li><p><a href="../../../../news/version_1.3.html">Tails 1.3</a> was released on 2015-02-24:</p>

<ul>
<li>Add Electrum bitcoin wallet.</li>
<li>Sandbox Tor Browser using AppArmor.</li>
<li>Add obfs4 pluggable transport.</li>
<li>Add keyringer to manage and share secrets using OpenPGP and Git.</li>
<li>Publish isohybrid images to simplify installation.</li>
<li>Enable tap-to-click and two-finger scrolling.</li>
<li>Add Ibus Vietnamese input method.</li>
<li>Improve support for OpenPGP smartcards.</li>
</ul>
</li>
<li><p><a href="../../../../news/version_1.3.1.html">Tails 1.3.1</a> was released on 2015-03-23:</p>

<ul>
<li>We transitioned to a new signing key.</li>
<li>Updated Tor Launcher.</li>
</ul>
</li>
<li><p><a href="../../../../news/version_1.4.html">Tails 1.4</a> was released on 2015-05-12:</p>

<ul>
<li>Update Tor Browser to include the security slider and better
protection against third-party tracking.</li>
<li>Add a shortcut to gEdit in OpenPGP Applet.</li>
<li>Add paperkey to back up OpenPGP keys on paper.</li>
<li>Better support for Vietnamese in LibreOffice.</li>
<li>Disable security warnings when connecting to POP3 and IMAP.</li>
<li>Add support for more printers.</li>
<li>Upgrade Tor to 0.2.6.7.</li>
<li>Remove the obsolete #i2p-help IRC channel.</li>
<li>Remove the command line email client mutt and msmtp.</li>
<li>Fix Unsafe and I2P browsers theme in Windows camouflage.</li>
<li>Remove the Tor Network Settings... from the Torbutton menu.</li>
<li>Upgrade syslinux for better hardware support.</li>
<li>Fix the localization of Tails Upgrader.</li>
<li>Fix the OpenPGP key servers configured in Seahorse.</li>
<li>Prevent Tor Browser from crashing when Orca is enabled.</li>
</ul>
</li>
<li><p><a href="../../../../news/version_1.4.1.html">Tails 1.4.1</a> was released on 2015-07-03:</p>

<ul>
<li>Upgrade Tor Browser to 4.5.3.</li>
<li>Upgrade Tor to 0.2.6.9-1~d70.wheezy+1+tails2.</li>
<li>Upgrade Linux to 3.16.7-ckt11-1.</li>
<li>Have AppArmor Deny Tor Browser access to the list of recently used files.</li>
<li>Fix automatic upgrades in Windows camouflage.</li>
</ul>
</li>
</ul>


</div>







</div>

<div id="footer" class="pagefooter" role="contentinfo">

<div id="pageinfo">












</div>
<div id="mirrorlist">Mirror: <a href="https://tails.boum.org/ikiwiki.cgi?do=goto&page=contribute/reports/SponsorS/2015/2015_01-07">tails.boum.org</a></div>

<!-- from The Amnesic Incognito Live System -->
</div>

</div>

<script type="text/javascript">
  var linkelements = document.querySelectorAll('.use-mirror-pool');
  if(linkelements.length > 0) {
    replaceUrlPrefixWithRandomMirror(linkelements);
  }
</script>

</body>
</html>
