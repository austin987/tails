As highlighted by grml's
[documentation](http://grml.org/grml-live/#lzma-vs-zlib), LZMA
compression of the squashfs lowers the generated images' size by more
than 10%.

[[!toc levels=1]]

Current status
==============

Being worked on in the `feature/lzma` Git branch.

* Linux kernel: Squashfs LZMA support is now in mainline (2.6.38-rcX)
  in the guise of Squashfs XZ - XZ is LZMA2 which is the successor to
  LZMA. Sadly, it is not enabled in Debian's builds of 2.6.38 as of
  package `linux-image-2.6.38-2-amd64` version 2.6.38-4. Reported as
  [[!debbug 613658]], 2.6.39 will come with the right options enabled
  as soon as it is released and reaches sid.
* Userspace tools: `squashfs-tools` 4.2 adds support for XZ
  compression. It has been uploaded into sid and can be easily
  backported for Squeeze until it reaches squeeze-backports.
* Debian Live: exporting `MKSQUASHFS_OPTIONS='-comp xz'` into the
  build environment (in `auto/build`) works.

=> Let's wait for 2.6.39 kernel to be uploaded to
Debian (maybe wait for it to reach squeeze-backports as well).

> Update: linux-image-2.6.39-2 has all we need => this now can be
> implemented. [[!tag todo/code]]

Test results
============

Results listed bellow are the resulting ISO images size.

20110423 - devel branch
-----------------------

- default compression: 680MB
- XZ compression: 585MB

Resources
=========

* [[!debbug 553707]]
* discussion on the [[!deblist live/2009/11/msg00031.html]]
  mailing-list
