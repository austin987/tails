This page lists the tails-greeter known issues.

[[!toc levels=2]]

This is related to tails-greeter as found in the master branch of
`git://git.immerda.ch/tails/tails-greeter.git`.

Release blockers
================

## no layout for certain languages

e.g. Deutsch, Farsi, Chinese => no keyboard layout is listed.

* in `feature/refactor_languages` branch, the bug is in
  `language.py:390` (`get_default_layouts`)
* in t-g 0.5, the bug is in `get_layouts_for_language` function

The problem is: xklavier config registry's `foreach_language_variant`
method wants a 639-2/B language code (e.g. `ger` for German), and we
pass it a 639-2/T code (e.g. `deu` for German).
According to [[!wikipedia List_of_ISO_639-1_codes]], ISO 639-2/B
three-letter codes are mostly the same as 639-2/T, but with some codes
derived from English names rather than native names of languages.
This also explains why Chinese (`chi` vs. `zho`) exposes the
same problem, while others don't.

## somewhat unclear pairs of toggle buttons

Displaying a "checked" icon on the button that's currently On, and
using a lighter text color on the other one, as is done in t-p-s,
would make things much more easy to understand. Maybe also set the
disabled button insensitive?

Other bugs
==========

## "waiting" mouse pointer not always displayed

## Insane widgets used for long lists

> Fixed for locale and keyboard in `feature/refactor_languages` branch
> (that introduces the "chosen keyboard layout not applied to the
> GNOME session" bug, so not merge-able as is).

## Choose keyboard layout independently from the language

> Implemented in in `feature/refactor_languages` branch (that
> introduces the "chosen keyboard layout not applied to the GNOME
> session" bug, so not merge-able as is).

## Keyboard layout widget not l10n'd with the selected language

Seems like all the UI's l10n is correctly updated on language change,
but the keyboard layout widget is constantly displayed using the
locale the window was loaded with.

> **Important, but no release blocker**.

* in ubiquity, the `d-i/make-keyboard-names` script uses
  `/usr/share/locale/*/LC_MESSAGES/xkeyboard-config.mo` to translate
  the keyboard layout names, from list of keyboard layouts gathered
  using the d-i's console-setup `Keyboard/KeyboardNames.pl` script
* `kbd-chooser.c` in `git://git.debian.org/d-i/kbd-chooser.git` uses
  `/usr/share/console/lists/`

## yes/no toggle buttons not translated after choosing language

The persistence and "more options" yes/no buttons are not translated
after choosing a non-English language.

## should probably inhibit udisks while working

## expose live-persist failure in some useful way

Currently, a GdmGreeter.errors.LivePersistError is thrown.

## Wrong icon used as langpanel's language label

langpanel: the icon used for the languages is "applications-internet" which
displays a globe in default icon theme, but could display something really
irrelevant in an other icon theme;

> **minor**: we don't change the icon theme Tails uses every
> now and then.

## Scroll effect in language selection menu

langpanel: the languages menu has an horrible scroll effect at opening.
That's GTK magic that I don't know how to workaround: when poping up a
ComboBox, GTK places the selected entry under the cursor, thus not displaying
the whole menu where I want it to be;

> **Minor, postponed**: it's not perfect to they eye, sure, but it's
> perfectly usable.

Missing features
================

## GUI improvements

* separator between languages list and "Other..."

## Locales should be generated in the background

Once a language is selected, while the user customizes other settings,
the locales should be generated. Login should be blocked (probably
with visual indication that something is going on) until locales
generation is finished.

It's not that simple to implement: t-g is executed as 'Debian-gdm' -
it can't run localedef to generate locale; we have to weight the risk
of sudo / suid vs. the user experience benefits.

## Admin password UI could be even better

Possibly hook `tails-persistence-setup`'s `update_passphrase_ui`
dynamic warning system in.

## Appearance

See [[todo/windows_theme]].
